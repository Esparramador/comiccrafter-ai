<div class="cc-section">
  <div class="cc-container">
    <div class="cc-product">
      <div class="cc-product__gallery">
        {% if product.featured_image %}
          <img
            src="{{ product.featured_image | image_url: width: 1200 }}"
            alt="{{ product.featured_image.alt | escape }}"
            width="1200"
            height="1200"
          />
        {% endif %}

        {% if product.images.size > 1 %}
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; padding: 0.5rem;">
            {% for image in product.images %}
              <div style="aspect-ratio: 1; border-radius: 0.5rem; overflow: hidden; border: 1px solid var(--cc-border); cursor: pointer;">
                <img
                  src="{{ image | image_url: width: 300 }}"
                  alt="{{ image.alt | escape }}"
                  loading="lazy"
                  style="width: 100%; height: 100%; object-fit: cover;"
                />
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <div class="cc-product__info">
        {% if product.vendor %}
          <p class="cc-badge cc-badge--purple" style="margin-bottom: 1rem;">{{ product.vendor }}</p>
        {% endif %}

        <h1 class="cc-product__title">{{ product.title }}</h1>

        <div class="cc-product__price-row">
          <span class="cc-product__price">{{ product.price | money }}</span>
          {% if product.compare_at_price > product.price %}
            <span class="cc-product__compare-price">{{ product.compare_at_price | money }}</span>
            <span class="cc-badge cc-badge--green">
              -{{ product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price }}%
            </span>
          {% endif %}
        </div>

        <div class="cc-product__description">
          {{ product.description }}
        </div>

        {% if product.available %}
          <form action="/cart/add" method="post" class="cc-product__form">
            {% if product.variants.size > 1 %}
              {% for option in product.options_with_values %}
                <div>
                  <label class="cc-label">{{ option.name }}</label>
                  <select name="id" class="cc-input" style="cursor: pointer;">
                    {% for variant in product.variants %}
                      <option value="{{ variant.id }}" {% unless variant.available %}disabled{% endunless %}>
                        {{ variant.title }} — {{ variant.price | money }}
                        {% unless variant.available %} (Agotado){% endunless %}
                      </option>
                    {% endfor %}
                  </select>
                </div>
              {% endfor %}
            {% else %}
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" />
            {% endif %}

            <div class="cc-product__quantity">
              <button type="button" class="cc-product__quantity-btn" data-action="decrease">−</button>
              <input type="number" name="quantity" value="1" min="1" class="cc-product__quantity-input" />
              <button type="button" class="cc-product__quantity-btn" data-action="increase">+</button>
            </div>

            <button type="submit" class="cc-btn cc-btn--primary cc-btn--lg cc-btn--full">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
              {{ 'products.add_to_cart' | t }}
            </button>
          </form>
        {% else %}
          <button disabled class="cc-btn cc-btn--ghost cc-btn--lg cc-btn--full" style="opacity: 0.5; cursor: not-allowed;">
            {{ 'products.sold_out' | t }}
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</div>
